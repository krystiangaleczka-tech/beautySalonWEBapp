<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1100" width="1200" height="1100">
  <defs>
    <style>
      .box { fill: #3a3a3a; stroke: #888888; stroke-width: 2; }
      .text { fill: #ffffff; font-family: Arial, sans-serif; font-size: 13px; text-anchor: middle; }
      .title { fill: #ffffff; font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; text-anchor: middle; }
      .arrow { stroke: #ffffff; stroke-width: 2; fill: none; }
      .arrow-dashed { stroke: #888888; stroke-width: 2; fill: none; stroke-dasharray: 5,5; }
      .label { fill: #cccccc; font-family: Arial, sans-serif; font-size: 11px; }
      .section { fill: #4a4a4a; stroke: none; opacity: 0.3; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="1200" height="1100" fill="#2a2a2a"/>

  <!-- Top row - main actors -->
  <rect class="box" x="50" y="20" width="150" height="60" rx="5"/>
  <text class="title" x="125" y="55">User (Admin/Staff)</text>

  <rect class="box" x="300" y="20" width="140" height="60" rx="5"/>
  <text class="title" x="370" y="55">Admin Frontend</text>

  <rect class="box" x="550" y="20" width="150" height="60" rx="5"/>
  <text class="title" x="625" y="55">Firebase Functions</text>

  <rect class="box" x="780" y="20" width="160" height="60" rx="5"/>
  <text class="title" x="860" y="55">Firestore Database</text>

  <rect class="box" x="990" y="20" width="150" height="60" rx="5"/>
  <text class="title" x="1065" y="55">Notifications</text>

  <!-- Login flow -->
  <text class="label" x="210" y="115">Login (Email/Password)</text>
  <path class="arrow" d="M 200 80 L 300 50" marker-end="url(#arrowhead)"/>

  <text class="label" x="475" y="115">Authenticate User</text>
  <path class="arrow" d="M 440 50 L 550 50" marker-end="url(#arrowhead)"/>

  <text class="label" x="715" y="115">Verify User Credentials</text>
  <path class="arrow" d="M 700 50 L 780 50" marker-end="url(#arrowhead)"/>

  <!-- Response flow -->
  <text class="label" x="715" y="175">User Data</text>
  <path class="arrow-dashed" d="M 780 60 L 700 100" marker-end="url(#arrowhead-dashed)"/>

  <text class="label" x="475" y="220">Auth Token</text>
  <path class="arrow-dashed" d="M 550 100 L 440 140" marker-end="url(#arrowhead-dashed)"/>

  <text class="label" x="210" y="265">Login Success</text>
  <path class="arrow-dashed" d="M 300 140 L 200 190" marker-end="url(#arrowhead-dashed)"/>

  <!-- Create Appointment flow -->
  <text class="label" x="210" y="340">Create Appointment</text>
  <path class="arrow" d="M 200 280 L 300 310" marker-end="url(#arrowhead)"/>

  <text class="label" x="475" y="365">Validate Appointment Data</text>
  <path class="arrow" d="M 440 320 L 550 350" marker-end="url(#arrowhead)"/>

  <text class="label" x="715" y="390">Check Time Conflicts</text>
  <path class="arrow" d="M 700 360 L 780 380" marker-end="url(#arrowhead)"/>

  <!-- Conflict check response -->
  <text class="label" x="715" y="445">Conflict Status</text>
  <path class="arrow-dashed" d="M 780 400 L 700 430" marker-end="url(#arrowhead-dashed)"/>

  <!-- Save appointment -->
  <text class="label" x="715" y="510">Save Appointment</text>
  <path class="arrow" d="M 700 470 L 780 500" marker-end="url(#arrowhead)"/>

  <!-- Create notification -->
  <text class="label" x="920" y="540">Create Notification</text>
  <path class="arrow" d="M 940 520 L 990 560" marker-end="url(#arrowhead)"/>

  <!-- Return appointment ID -->
  <text class="label" x="715" y="605">Appointment ID</text>
  <path class="arrow-dashed" d="M 780 580 L 700 620" marker-end="url(#arrowhead-dashed)"/>

  <text class="label" x="475" y="650">Success Response</text>
  <path class="arrow-dashed" d="M 550 620 L 440 660" marker-end="url(#arrowhead-dashed)"/>

  <text class="label" x="210" y="695">Appointment Created</text>
  <path class="arrow-dashed" d="M 300 670 L 200 710" marker-end="url(#arrowhead-dashed)"/>

  <!-- Real-time updates section -->
  <rect class="section" x="40" y="760" width="880" height="100" rx="5"/>
  <text class="title" x="480" y="785" style="opacity: 1;">Real-time Updates</text>

  <text class="label" x="480" y="820">Appointment List Updated</text>
  <path class="arrow" d="M 860 800 L 440 800" marker-end="url(#arrowhead)"/>

  <text class="label" x="210" y="860">Refreshed Calendar View</text>
  <path class="arrow" d="M 300 820 L 200 850" marker-end="url(#arrowhead)"/>

  <!-- Bottom row - duplicated actors for sequence diagram completeness -->
  <rect class="box" x="50" y="950" width="150" height="60" rx="5"/>
  <text class="title" x="125" y="985">User (Admin/Staff)</text>

  <rect class="box" x="300" y="950" width="140" height="60" rx="5"/>
  <text class="title" x="370" y="985">Admin Frontend</text>

  <rect class="box" x="550" y="950" width="150" height="60" rx="5"/>
  <text class="title" x="625" y="985">Firebase Functions</text>

  <rect class="box" x="780" y="950" width="160" height="60" rx="5"/>
  <text class="title" x="860" y="985">Firestore Database</text>

  <rect class="box" x="990" y="950" width="150" height="60" rx="5"/>
  <text class="title" x="1065" y="985">Notifications</text>

  <!-- Vertical lifelines -->
  <line x1="125" y1="80" x2="125" y2="950" stroke="#555555" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="370" y1="80" x2="370" y2="950" stroke="#555555" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="625" y1="80" x2="625" y2="950" stroke="#555555" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="860" y1="80" x2="860" y2="950" stroke="#555555" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="1065" y1="80" x2="1065" y2="950" stroke="#555555" stroke-width="1" stroke-dasharray="3,3"/>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ffffff"/>
    </marker>
    <marker id="arrowhead-dashed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#888888"/>
    </marker>
  </defs>
</svg>